## Data Explanation

Experiments of RQ1 are used for measuring the overall quality of ContractSyn-synthesized smart contracts. In detail, we quantify the structural differences between ground-truth smart contracts and synthesized smart contracts based on *Deckard Vector Cosine Similarity*, and record the function-level functionality correctness of synthesized smart contracts. Finally, we manually measure the editing distances (inspired by *GumTreeDiff* editing scripts) between them. The evaluation results are summarized as follows.

### Deckard Vector Similarity

Refer to the [Deckard-Similarity repo](https://github.com/CBackyx/Deckard-similarity) for how to calculate. **Do not forget** to copy the `test_case' folder to the Deckard-Similarity repo first. 

```bash
cd synthesis/test/evaluation-plot
# Copy vec-cosine.txt (generated by Deckard-Similarity) to ./data/
python RQ1_syntactic_plot.py
```

| Contract | Vec cosine | Difference 1-norm | Difference 2-norm |
| ---- | ---- | ---- | ---- |
| SPA5 | 0.9998893638795037 | 201.0 | 61.652250567193406 |
| SPA0 | 0.9995312028766032 | 201.0 | 61.652250567193406 |
| SPA3 | 1.0000000000000002 | 0.0 | 0.0 |
| SPA9 | 0.9997105357066556 | 201.0 | 61.652250567193406 |
| SPA6 | 0.9993860152114311 | 227.0 | 67.69785816405124 |
| SPA8 | 1.0 | 0.0 | 0.0 |
| SPA7 | 0.9998893638795037 | 201.0 | 61.652250567193406 |
| SPA2 | 0.9995312028766032 | 201.0 | 61.652250567193406 |
| SPA4 | 1.0 | 0.0 | 0.0 |
| SPA1 | 0.9998617497820135 | 77.0 | 19.313207915827967 |
| Security_Purchase-1001463-000138038917000049 | 0.9997104164832923 | 369.0 | 112.88489712977551 |
| SECPA2 | 0.9997105357066556 | 201.0 | 61.652250567193406 |
| Security_Purchase-1009891-000119380517000861 | 0.999952173535509 | 184.0 | 54.772255750516614 |
| SECPA3 | 0.999782214418797 | 70.0 | 13.638181696985855 |
| Security_Purchase-1040792-000143774917014788 | 1.0000000000000002 | 0.0 | 0.0 |
| Security_Purchase-716778-000147793217000397 | 0.9999546876485953 | 168.0 | 51.264022471905186 |
| Security_Purchase-849636-000149315221010354 | 0.9999999999999999 | 0.0 | 0.0 |
| Security_Purchase-729237-000119312512213442 | 1.0000000000000002 | 0.0 | 0.0 |
| Security_Purchase-825322-000149315221004462 | 0.9999999999999999 | 0.0 | 0.0 |
| Security_Purchase-719274-000143774913008407 | 1.0000000000000002 | 0.0 | 0.0 |
| SECPA0 | 0.9997105357066556 | 201.0 | 61.652250567193406 |
| Security_Purchase-1025536-000119312508191195 | 1.0000000000000002 | 0.0 | 0.0 |
| SECPA1 | 0.9997105357066556 | 201.0 | 61.652250567193406 |
| Security_Purchase-876883-000114420419014106 | 1.0000000000000002 | 0.0 | 0.0 |
| underwriting_agreements-912892-000110465919031794 | 0.9999546876485953 | 168.0 | 51.264022471905186 |
| underwriting_agreements-101829-000119312507160808 | 0.9991120817937074 | 534.0 | 162.04320411544572 |
| underwriting_agreements-1253986-000110465917068004 | 0.9999546876485953 | 168.0 | 51.264022471905186 |
| underwriting_agreements-769218-000110465912005256 | 0.9999546876485953 | 168.0 | 51.264022471905186 |
| underwriting_agreements-1020569-000110465912056704 | 0.9998617497820135 | 77.0 | 19.313207915827967 |
| underwriting_agreements-1465128-000110465917020013 | 0.9999999999999999 | 0.0 | 0.0 |
| underwriting_agreements-1451505-000110465912063229 | 0.9999546876485953 | 168.0 | 51.264022471905186 |
| underwriting_agreements-47217-000119312511250713 | 0.9999546876485953 | 168.0 | 51.264022471905186 |
| underwriting_agreements-1330007-000094366305000388 | 1.0000000000000002 | 0.0 | 0.0 |
| underwriting_agreements-1491576-000110465914068930 | 1.0 | 0.0 | 0.0 |
| underwriting_agreements-1144519-000110465916157823 | 0.9999546876485953 | 168.0 | 51.264022471905186 |
| credit_contract-1315695-000110465911007794 | 1.0000000000000002 | 0.0 | 0.0 |
| credit_contract-1001250-000110465918064317 | 1.0000000000000002 | 0.0 | 0.0 |
| credit_contract-1059262-000110465903024786 | 0.9999944524353416 | 6.0 | 2.449489742783178 |
| credit_contract-1307954-000110465917040215 | 1.0000000000000002 | 0.0 | 0.0 |
| credit_contract-1336545-000110465913028036 | 1.0000000000000002 | 0.0 | 0.0 |
| credit_contract-1378718-000110465914014925 | 0.9999721306861058 | 16.0 | 6.324555320336759 |
| credit_contract-869231-000110465905039622 | 0.9999721306861058 | 16.0 | 6.324555320336759 |
| credit_contract-722077-000110465906005085 | 0.9999721306861058 | 16.0 | 6.324555320336759 |
| agreement_of_plan_and_merger-912183-000104746911009107 | 1.0000000000000002 | 0.0 | 0.0 |
| agreement_of_plan_and_merger-1047884-000110465920133265 | 1.0000000000000002 | 0.0 | 0.0 |
| agreement_of_plan_and_merger-1499961-000143774921017313 | 1.0000000000000002 | 0.0 | 0.0 |
| agreement_of_plan_and_merger-1826333-000110465921116164 | 1.0000000000000002 | 0.0 | 0.0 |
| agreement_of_plan_and_merger-1701821-000110465918051763 | 0.9999721306861058 | 16.0 | 6.324555320336759 |
| agreement_of_plan_and_merger-1545772-000114420418017984 | 1.0000000000000002 | 0.0 | 0.0 |
| agreement_of_plan_and_merger-1069353-000129993306006307 | 1.0000000000000002 | 0.0 | 0.0 |
| agreement_of_plan_and_merger-1539042-000114420413044482 | 1.0000000000000002 | 0.0 | 0.0 |
| agreement_of_plan_and_merger-30419-000119312512493153 | 1.0000000000000002 | 0.0 | 0.0 |
| agreement_of_plan_and_merger-895930-000119312516623030 | 1.0000000000000002 | 0.0 | 0.0 |
| employ_agreement-1328798-000110465915027320 | 1.0000000000000002 | 0.0 | 0.0 |
| employ_agreement-1523526-000121390019016963 | 1.0 | 0.0 | 0.0 |
| employ_agreement-1347523-000119312515185938 | 0.9999406737646405 | 168.0 | 51.264022471905186 |
| employ_agreement-1519401-000156459020051441 | 0.9999546876485953 | 168.0 | 51.264022471905186 |
| employ_agreement-884624-000156459016016963 | 1.0000000000000002 | 0.0 | 0.0 |
| employ_agreement-1415277-000117120012000115 | 1.0000000000000002 | 0.0 | 0.0 |
| employ_agreement-1036070-000119312511000688 | 1.0 | 0.0 | 0.0 |
| employ_agreement-894315-000156459017001905 | 1.0 | 0.0 | 0.0 |
| employ_agreement-1635965-000163596518000015 | 0.9999406737646405 | 168.0 | 51.264022471905186 |
| employ_agreement-1358762-000156459019042512 | 1.0000000000000002 | 0.0 | 0.0 |
| employ_agreement-773660-000119312512454011 | 0.9999762261418826 | 17.0 | 5.916079783099616 |
| employ_agreement-1377013-000119312515269291 | 0.9999406737646405 | 168.0 | 51.264022471905186 |
| employ_agreement-932696-000119312513071730 | 0.9999999999999999 | 0.0 | 0.0 |
| employ_agreement-1080657-000143774921007660 | 0.9999406737646405 | 168.0 | 51.264022471905186 |
| employ_agreement-1501364-000119312514098837 | 1.0000000000000002 | 0.0 | 0.0 |
| indenture_contracts-1392380-000143774920000496 | 0.9999546876485953 | 168.0 | 51.264022471905186 |
| indenture_contracts-1273801-000110465913050145 | 0.9987848054765698 | 686.0 | 209.60916010518244 |
| indenture_contracts-812074-000110465910040529 | 0.9982097179157016 | 745.0 | 226.12607103118384 |
| indenture_contracts-1616543-000110465919042301 | 0.9999546876485953 | 168.0 | 51.264022471905186 |
| indenture_contracts-1492966-000110465915087541 | 0.9997104164832923 | 369.0 | 112.88489712977551 |
| indenture_contracts-1326160-000110465917050945 | 0.9959967077148935 | 887.0 | 270.99630993797683 |
| indenture_contracts-1358651-000091205719000252 | 0.9987848054765698 | 686.0 | 209.60916010518244 |
| indenture_contracts-1328091-000119312506076313 | 0.9998845177892572 | 227.0 | 67.69785816405124 |
| indenture_contracts-28630-000110465906006276 | 0.9987848054765698 | 686.0 | 209.60916010518244 |
| indenture_contracts-1333141-000104746914008795 | 0.9975448498917353 | 887.0 | 270.99630993797683 |
| trust_agreement-1435967-000111650209001121 | 1.0000000000000002 | 0.0 | 0.0 |
| trust_agreement-1349577-000090342306000228 | 0.9998845177892572 | 227.0 | 67.69785816405124 |
| trust_agreement-1002813-000100281302000010 | 0.999288626250463 | 518.0 | 158.6379525838631 |
| trust_agreement-1345264-000116231805001084 | 1.0000000000000002 | 0.0 | 0.0 |
| trust_agreement-1313234-000116231805000029 | 0.9998845177892572 | 227.0 | 67.69785816405124 |
| trust_agreement-1435967-000111650209001122 | 1.0000000000000002 | 0.0 | 0.0 |
| trust_agreement-1329952-000095011706001181 | 0.9998845177892572 | 227.0 | 67.69785816405124 |
| trust_agreement-1225289-000116231803000141 | 0.9999999999999999 | 0.0 | 0.0 |
| trust_agreement-1217017-000116231803000049 | 0.9999546876485953 | 168.0 | 51.264022471905186 |
| trust_agreement-1299273-000116231804000494 | 0.9999999999999999 | 0.0 | 0.0 |
| registration_rights_contracts-1567529-000121390020001409 | 0.9984968823357129 | 518.0 | 158.6379525838631 |
| registration_rights_contracts-1011835-000119312505001000 | 0.9999546876485953 | 168.0 | 51.264022471905186 |
| registration_rights_contracts-1158172-000119312521004725 | 1.0000000000000002 | 0.0 | 0.0 |
| registration_rights_contracts-1708410-000149315221022128 | 1.0 | 0.0 | 0.0 |
| registration_rights_contracts-1352819-000119312507254768 | 0.9975448498917353 | 887.0 | 270.99630993797683 |
| registration_rights_contracts-894871-000089487100500005 | 1.0000000000000002 | 0.0 | 0.0 |
| registration_rights_contracts-1723089-000119312518130047 | 1.0000000000000002 | 0.0 | 0.0 |
| registration_rights_contracts-1521847-000119312514269228 | 0.9999999999999999 | 0.0 | 0.0 |
| registration_rights_contracts-1404912-000110465912067896 | 1.0000000000000002 | 0.0 | 0.0 | 1.0000000000000002 | 0.0 | 0.0 |
| registration_rights_contracts-1457612-000104746913011353 | 0.9985994752906117 | 719.0 | 219.8977034895999 |
| registration_rights_contracts-1717556-000114420418048323 | 0.9981770610081077 | 686.0 | 209.60916010518244 |
| registration_rights_contracts-888693-000095013702005552 | 0.9980398959645943 | 719.0 | 219.8977034895999 |
| registration_rights_contracts-1752836-000119312520131151 | 1.0000000000000002 | 0.0 | 0.0 |
| SA0 | 1.0 | 0.0 | 0.0 |
| SA1 | 0.9967428628780386 | 719.0 | 219.8977034895999 |
| PA5 | 1.0000000000000002 | 0.0 | 0.0 |
| PA4 | 0.9984968823357129 | 518.0 | 158.6379525838631 |
| PA3 | 0.9988063880205262 | 369.0 | 112.88489712977551 |
| PA0 | 0.9967428628780386 | 719.0 | 219.8977034895999 |
| PA2 | 0.9980398959645943 | 719.0 | 219.8977034895999 |
| PA1 | 1.0000000000000002 | 0.0 | 0.0 |
| agreements-1548981-000119312513179715 | 0.9999999999999999 | 0.0 | 0.0 |
| agreements-1550935-000155837019006682 | 1.0 | 0.0 | 0.0 |
| agreements-939934-000110465905035446 | 0.9999999999999998 | 0.0 | 0.0 |
| agreements-1175483-000119312512295114 | 1.0 | 0.0 | 0.0 |
| agreements-1513761-000110465921026456 | 1.0000000000000002 | 0.0 | 0.0 |
| agreements-1549107-000110465921117363 | 1.0 | 0.0 | 0.0 |
| agreements-1172203-000119312505027037 | 1.0 | 0.0 | 0.0 |
| agreements-1415921-000119312521102245 | 0.9999999999999999 | 0.0 | 0.0 |
| agreements-1140019-000110465921058768 | 0.9999999999999998 | 0.0 | 0.0 |

### Function-level Functionality Accuracy

```bash
cd synthesis/test
node utils/batch_func_accuracy.js
cd evaluation-plot
python RQ1_func_correctness.py
```

| Contract Category      | CC     | EA     | IC     | PMA    | RRC    | SECPA  | TA     | Mini-bench | Average |
| ---------------------- | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ---------- | ------- |
| Functionality Accuracy | 91.25% | 91.57% | 87.84% | 88.00% | 92.31% | 95.79% | 83.56% | 88.74%     | 89.92%  |

|Contract|func num|correct func num|
|----|----|----|
|credit_contract-1001250-000110465918064317|10|9|
|credit_contract-1059262-000110465903024786|10|9|
|credit_contract-1307954-000110465917040215|10|9|
|credit_contract-1315695-000110465911007794|10|10|
|credit_contract-1336545-000110465913028036|10|9|
|credit_contract-1378718-000110465914014925|10|9|
|credit_contract-722077-000110465906005085|10|9|
|credit_contract-869231-000110465905039622|10|9|
|employ_agreement-1080657-000143774921007660|9|8|
|employ_agreement-1347523-000119312515185938|9|7|
|employ_agreement-1358762-000156459019042512|10|10|
|employ_agreement-1377013-000119312515269291|9|7|
|employ_agreement-1501364-000119312514098837|10|10|
|employ_agreement-1519401-000156459020051441|10|9|
|employ_agreement-1635965-000163596518000015|9|8|
|employ_agreement-773660-000119312512454011|9|9|
|employ_agreement-894315-000156459017001905|8|8|
|indenture_contracts-1273801-000110465913050145|7|7|
|indenture_contracts-1326160-000110465917050945|5|4|
|indenture_contracts-1328091-000119312506076313|9|7|
|indenture_contracts-1333141-000104746914008795|6|6|
|indenture_contracts-1358651-000091205719000252|7|6|
|indenture_contracts-1392380-000143774920000496|9|8|
|indenture_contracts-1492966-000110465915087541|8|7|
|indenture_contracts-1616543-000110465919042301|9|8|
|indenture_contracts-28630-000110465906006276|7|6|
|indenture_contracts-812074-000110465910040529|7|6|
|agreement_of_plan_and_merger-1047884-000110465920133265|10|9|
|agreement_of_plan_and_merger-1069353-000129993306006307|10|9|
|agreement_of_plan_and_merger-1499961-000143774921017313|10|9|
|agreement_of_plan_and_merger-1539042-000114420413044482|10|9|
|agreement_of_plan_and_merger-1545772-000114420418017984|10|8|
|agreement_of_plan_and_merger-1701821-000110465918051763|10|9|
|agreement_of_plan_and_merger-1826333-000110465921116164|10|9|
|agreement_of_plan_and_merger-30419-000119312512493153|10|9|
|agreement_of_plan_and_merger-895930-000119312516623030|10|8|
|agreement_of_plan_and_merger-912183-000104746911009107|10|9|
|PA0|5|4|
|PA1|10|10|
|PA2|6|5|
|PA3|5|4|
|PA4|8|6|
|PA5|10|10|
|registration_rights_contracts-1011835-000119312505001000|9|8|
|registration_rights_contracts-1158172-000119312521004725|10|9|
|registration_rights_contracts-1352819-000119312507254768|6|6|
|registration_rights_contracts-1404912-000110465912067896|10|10|
|registration_rights_contracts-1457612-000104746913011353|7|5|
|registration_rights_contracts-1567529-000121390020001409|6|6|
|registration_rights_contracts-1723089-000119312518130047|10|9|
|registration_rights_contracts-1752836-000119312520131151|10|9|
|registration_rights_contracts-894871-000089487100500005|10|10|
|SA0|6|5|
|SA1|5|5|
|SECPA0|6|6|
|SECPA1|6|6|
|SECPA2|6|5|
|SECPA3|8|5|
|Security_Purchase-1001463-000138038917000049|8|8|
|Security_Purchase-1009891-000119380517000861|9|9|
|Security_Purchase-1025536-000119312508191195|10|10|
|Security_Purchase-1040792-000143774917014788|10|8|
|Security_Purchase-716778-000147793217000397|10|9|
|Security_Purchase-719274-000143774913008407|10|10|
|Security_Purchase-729237-000119312512213442|10|10|
|Security_Purchase-825322-000149315221004462|9|9|
|Security_Purchase-849636-000149315221010354|9|8|
|Security_Purchase-876883-000114420419014106|10|10|
|SPA0|5|5|
|SPA1|8|6|
|SPA2|5|5|
|SPA3|10|9|
|SPA4|8|8|
|SPA5|8|7|
|SPA6|6|3|
|SPA7|8|8|
|SPA8|6|6|
|SPA9|6|6|
|trust_agreement-1002813-000100281302000010|8|7|
|trust_agreement-1217017-000116231803000049|9|8|
|trust_agreement-1299273-000116231804000494|9|8|
|trust_agreement-1313234-000116231805000029|9|6|
|trust_agreement-1329952-000095011706001181|9|7|
|trust_agreement-1345264-000116231805001084|10|10|
|trust_agreement-1349577-000090342306000228|9|7|
|trust_agreement-1435967-000111650209001121|10|8|
|underwriting_agreements-101829-000119312507160808|7|7|
|underwriting_agreements-1020569-000110465912056704|9|6|
|underwriting_agreements-1144519-000110465916157823|9|8|
|underwriting_agreements-1253986-000110465917068004|9|8|
|underwriting_agreements-1330007-000094366305000388|10|9|
|underwriting_agreements-1451505-000110465912063229|9|8|
|underwriting_agreements-1491576-000110465914068930|9|9|
|underwriting_agreements-47217-000119312511250713|9|7|
|underwriting_agreements-769218-000110465912005256|9|8|
|underwriting_agreements-912892-000110465919031794|9|8|

### Edit Nums

> From synthesized smart contracts to the corresponding ground-truth smart contracts.

```bash
cd synthesis/test
node utils/edit_action_count.js
cd evaluation-plot
python RQ1_semantic_plot.py
```

|Contract|Same|Edit Num|
|----|----|----|
|credit_contract-1001250-000110465918064317|false|3|
|credit_contract-1059262-000110465903024786|false|2|
|credit_contract-1307954-000110465917040215|false|2|
|credit_contract-1315695-000110465911007794|true|0|
|credit_contract-1336545-000110465913028036|false|4|
|credit_contract-1378718-000110465914014925|false|2|
|credit_contract-722077-000110465906005085|false|3|
|credit_contract-869231-000110465905039622|false|2|
|employ_agreement-1080657-000143774921007660|false|2|
|employ_agreement-1347523-000119312515185938|false|4|
|employ_agreement-1358762-000156459019042512|true|1|
|employ_agreement-1377013-000119312515269291|false|3|
|employ_agreement-1501364-000119312514098837|false|3|
|employ_agreement-1519401-000156459020051441|false|2|
|employ_agreement-1635965-000163596518000015|false|1|
|employ_agreement-773660-000119312512454011|true|1|
|employ_agreement-894315-000156459017001905|true|0|
|indenture_contracts-1273801-000110465913050145|false|4|
|indenture_contracts-1326160-000110465917050945|false|6|
|indenture_contracts-1328091-000119312506076313|false|5|
|indenture_contracts-1333141-000104746914008795|false|6|
|indenture_contracts-1358651-000091205719000252|false|6|
|indenture_contracts-1392380-000143774920000496|false|3|
|indenture_contracts-1492966-000110465915087541|false|5|
|indenture_contracts-1616543-000110465919042301|false|3|
|indenture_contracts-28630-000110465906006276|false|6|
|indenture_contracts-812074-000110465910040529|false|5|
|agreement_of_plan_and_merger-1047884-000110465920133265|false|1|
|agreement_of_plan_and_merger-1069353-000129993306006307|false|3|
|agreement_of_plan_and_merger-1499961-000143774921017313|false|2|
|agreement_of_plan_and_merger-1539042-000114420413044482|false|3|
|agreement_of_plan_and_merger-1545772-000114420418017984|false|5|
|agreement_of_plan_and_merger-1701821-000110465918051763|false|2|
|agreement_of_plan_and_merger-1826333-000110465921116164|false|2|
|agreement_of_plan_and_merger-30419-000119312512493153|false|3|
|agreement_of_plan_and_merger-895930-000119312516623030|false|4|
|agreement_of_plan_and_merger-912183-000104746911009107|false|1|
|PA0|false|4|
|PA1|true|2|
|PA2|false|5|
|PA3|false|2|
|PA4|false|3|
|PA5|true|0|
|registration_rights_contracts-1011835-000119312505001000|false|5|
|registration_rights_contracts-1158172-000119312521004725|false|2|
|registration_rights_contracts-1352819-000119312507254768|false|5|
|registration_rights_contracts-1404912-000110465912067896|false|2|
|registration_rights_contracts-1457612-000104746913011353|false|7|
|registration_rights_contracts-1567529-000121390020001409|false|3|
|registration_rights_contracts-1723089-000119312518130047|false|2|
|registration_rights_contracts-1752836-000119312520131151|false|1|
|registration_rights_contracts-894871-000089487100500005|true|0|
|SA0|false|1|
|SA1|false|3|
|SECPA0|false|1|
|SECPA1|false|1|
|SECPA2|false|2|
|SECPA3|false|5|
|Security_Purchase-1001463-000138038917000049|false|2|
|Security_Purchase-1009891-000119380517000861|false|1|
|Security_Purchase-1025536-000119312508191195|false|1|
|Security_Purchase-1040792-000143774917014788|false|2|
|Security_Purchase-716778-000147793217000397|false|1|
|Security_Purchase-719274-000143774913008407|true|1|
|Security_Purchase-729237-000119312512213442|true|1|
|Security_Purchase-825322-000149315221004462|true|1|
|Security_Purchase-849636-000149315221010354|false|1|
|Security_Purchase-876883-000114420419014106|true|0|
|SPA0|false|1|
|SPA1|false|4|
|SPA2|false|1|
|SPA3|false|1|
|SPA4|true|1|
|SPA5|false|2|
|SPA6|false|5|
|SPA7|false|1|
|SPA8|true|0|
|SPA9|false|2|
|trust_agreement-1002813-000100281302000010|false|5|
|trust_agreement-1217017-000116231803000049|false|3|
|trust_agreement-1299273-000116231804000494|false|1|
|trust_agreement-1313234-000116231805000029|false|5|
|trust_agreement-1329952-000095011706001181|false|6|
|trust_agreement-1345264-000116231805001084|true|0|
|trust_agreement-1349577-000090342306000228|false|5|
|trust_agreement-1435967-000111650209001121|false|5|
|underwriting_agreements-101829-000119312507160808|false|4|
|underwriting_agreements-1020569-000110465912056704|false|7|
|underwriting_agreements-1144519-000110465916157823|false|4|
|underwriting_agreements-1253986-000110465917068004|false|5|
|underwriting_agreements-1330007-000094366305000388|false|3|
|underwriting_agreements-1451505-000110465912063229|false|5|
|underwriting_agreements-1491576-000110465914068930|false|3|
|underwriting_agreements-47217-000119312511250713|false|4|
|underwriting_agreements-769218-000110465912005256|false|3|
|underwriting_agreements-912892-000110465919031794|false|5|

